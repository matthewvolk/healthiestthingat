$(function(){const a=$("#mainSearchInputField");a.focus(),$("#searchForm").on("submit",function(b){b.preventDefault(),$.ajax({url:"/search",method:"POST",contentType:"application/json",data:JSON.stringify({restaurantQuery:a.val()}),success:function(b){renderResults(b),a.val(""),a.blur(),window.scrollTo(0,200)}})}),$(".restaurant-link").on("click",function(a){a.preventDefault();const b=$(this)[0].childNodes[1].dataset.restaurantImage;$.ajax({url:"/search",method:"POST",contentType:"application/json",data:JSON.stringify({restaurantQuery:b}),success:function(a){renderResults(a),window.scrollTo(0,200)}})})});const renderResults=a=>{if($(".hero-browser-inner").empty(),a[0].menu_item_name){for(let b=0;25>b;b++)$(".first").append(`
        <p>
          ${renderImage(a,b)}
          <span style="margin-bottom:5px;font-size:1.15rem;"><strong>${"#"+(b+1)}. ${0==b?"(Lowest Calories)":""} ${a[b].menu_item_name}</strong></span>
          <br /> 
          <span style="color:#1eae8f;font-size:0.90rem;"><strong>Calories:</strong> ${a[b].calories_kcal}</span>
          <br />
          <span style="font-size:0.90rem;"><strong>Total Fat:</strong> ${a[b].total_fat_grams}g</span>
          <br />
          <span style="color:#1eae8f;font-size:0.90rem;"><strong>Total Carbs:</strong> ${a[b].carbohydrates_grams}g</span>
          <br />
          <span style="color:#1eae8f;font-size:0.90rem;"><strong>Protein:</strong> ${a[b].protein_grams}g</span>
          <br />
          <span style="font-size:0.90rem;"><strong>Saturated Fat:</strong> ${a[b].saturated_fat_grams}g</span>
          <br />
          <span style="font-size:0.90rem;"><strong>Trans Fat:</strong> ${a[b].trans_fat_grams}g</span>
          <br>
          <span style="font-size:0.90rem;"><strong>Cholesterol:</strong> ${a[b].cholesterol_miligrams}mg (${(100*(a[b].cholesterol_miligrams/300).toFixed(4)).toFixed(2)}% DV*)</span>
          <br />
          <span style="color:#1eae8f;font-size:0.90rem;"><strong>Sodium:</strong> ${a[b].sodium_miligrams}mg (${(100*(a[b].sodium_miligrams/2300).toFixed(4)).toFixed(2)}% DV*)</span> 
          <br />
          <span style="font-size:0.90rem;"><strong>Dietary Fiber:</strong> ${a[b].dietary_fiber_grams}g</span>
          <br />
          <span style="font-size:0.90rem;"><strong>Sugar:</strong> ${a[b].sugar_grams}g</span>
        </p>
        <hr />`);$(".first").append(`<small>*Daily Values based on a 2,000 calorie diet.</small>`)}else $(".first").append(`<p>Oops! We're still building our database, and don't have that restaurant yet. To request that we add it, send an email to Matt at <a href="mailto:volkmattj@gmail.com"><span style="unicode-bidi: bidi-override; direction: rtl;">moc.liamg@jttamklov</span></a></p><img style="margin: 0 auto;" src='https://media0.giphy.com/media/CDpAmfo9dbOyA/giphy.gif?cid=3640f6095be4f32d737452426baf3e84' />`)},renderImage=(a,b)=>a[b].image_url?`<img src="${a[b].image_url}" width="115" style="margin: 0 auto 15px auto;" />`:``;